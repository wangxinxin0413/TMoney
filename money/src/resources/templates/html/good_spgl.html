<!doctype html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>店铺管理-日进斗金收银软件</title>
		<link rel="stylesheet" th:href="@{/css/shop_managerment.css}">
		<link rel="stylesheet" th:href="@{/css/base.css}">
    	<link rel="stylesheet" th:href="@{/css/reset.css}">
    	<link rel="stylesheet" th:href="@{/css/bootstrap.css}">
    	<script th:src="@{/js/jquery-1.12.4.js}"></script>
    	<script th:src="@{/js/bootstrap.js}"></script>
    	<script th:src="@{/js/vue.js}"></script>
    	<script th:src="@{/js/axios.min.js}"></script>
		<style>
			* {
				margin: 0;
				padding: 0;
			}
			/*a标签去线*/
			
			a {
				color: #000000;
				text-decoration: none;
			}
			
			a:hover {
				color: #2F9833;
				text-decoration: none;
			}
			
			hr {
				height: 0.5px;
				background-color: #C7C7C7;
			}
			
			ul {
				list-style: none outside none;
			}
			/*最上方导航栏*/
			
			.navArea ul {
				/* display: block; */
				float: left;
				width: 100%;
				clear: both;
			}
			
			li {
				display: list-item;
				text-align: -webkit-match-parent;
			}
			
			.navArea ul li {
				float: left;
				width: 16.66%;
				padding-top: 10px;
				padding-bottom: 10px;
			}
			
			.navArea ul li a {
				display: block;
				margin-left: 4px;
				margin-right: 4px;
				line-height: 40px;
				border: 1px solid #DDD;
				border-radius: 4px;
				font-size: 16px;
				font-weight: 400;
				text-align: center;
				text-transform: uppercase;
				vertical-align: middle;
				text-decoration: none;
			}
			
			.navArea ul li.current a {
				color: #FFF;
				background: #44b549;
				border: 1px solid #44b549;
				cursor: default;
			}
			
			.navArea ul li a:hover {
				border: 1px solid #44b549;
			}
			/*右侧导航栏*/
			
			.navList {
				width: 100%;
				padding-top: 10px;
				padding-bottom: 10px;
			}
			
			.navList ul li {
				display: block;
				line-height: 50px;
				border-bottom: 1px solid #DDD;
				border-right: 1px solid #DDD;
				font-size: 16px;
				font-weight: 400;
				text-align: center;
				text-transform: uppercase;
				vertical-align: middle;
				text-decoration: none;
			}
			
			.navList li.active a {
				color: #44b549;
				text-decoration: none;
			}
			
			.navList li.active {
				background: #FFF;
				border-right: 1px solid #FFF;
			}
			
			.navList li a {
				display: block;
				line-height: 52px;
				font-size: 16px;
				text-decoration: none;
			}
			/*底部*/
			
			.foot{
			    background: #fafafa none repeat scroll 0 0;
				border: 1px solid #dfdfdf;
				/* float: left; */
				padding: 20px 0;
				text-align: center;
				width: 100%;
			}
			
		</style>
	</head>

	<body>
		<!--头部-->
		<div class="row" style="background-color:white">
			<div style="margin: 0 auto; width: 1120px;">
				<!--图片-->
				<div class="col-md-4" style="height: 33px; line-height: 48px;">
					<img th:src="@{/img/logo-7.png}" height="40px" />
				</div>
				<!--账号-->
				<div class="col-md-1" style="height: 33px; line-height: 55px;">
					<a href="accountindex.html">
						账户
					</a>
				</div>
				<!--账号-->
				<div class="col-md-2" style="height: 33px; line-height: 55px;">
					<a href="">
						实体店
					</a>
				</div>
				<div class="col-md-4 text-right" style="height: 33px; line-height: 48px;">
					<img th:src="@{/img/3.png}" height="40px" />
					<span>18873307307</span>
				</div>
				<div class="col-md-1" style="margin-top: 13px;">
					<a href="" style="color: #B3B3B3;">退出</a>
				</div>
			</div>
		</div>
		<hr/>
		<!--身体-->
		<div class="container">
			<div class="" style="margin-top: -20px;">
				<!--临时高度-->
				<!--第一排那些个小框框-->
				<div class="navArea clearfix text-center">
					<ul>
						<li>
							<a href="new_file.html">店铺</a>
						</li>
						<li class="current">
							<a href="new_file1.html">商品</a>
						</li>
						<li>
							<a href="#">库存</a>
						</li>
						<li>
							<a href="#">网上订单</a>
						</li>
						<li>
							<a href="#">报表</a>
						</li>
						<li>
							<a href="#">会员</a>
						</li>
					</ul>
				</div>
				<!--下面的排的主要身体-->
				<div class="container">
					<div class="row" style="border: solid 1px #C7C7C7;margin-left: -9.5px;width: 99.2%;display: flex;justify-content: space-around;" >
						<div class="col-md-2" >
							<div class="navList text-center" style="margin:0 -15.5px;width:180px;background-color:#F3F3F3;height: 100%">
								<ul style="margin-top: -10px;" >
									<li data-id="dianpo1">
										<a th:href="@{/ha/tiao?htmlt=good_splb}" >商品类别</a>
									</li>
									<li data-id="dianpo2" class="active">
										<a th:href="@{/ha/tiao?htmlt=good_spgl}" >商品管理</a>
									</li>
									<li data-id="dianpo3">
										<a th:href="@{/ha/tiao?htmlt=good_spsc}" >商品上传</a>
									</li>
									<li data-id="goods4">
										<a th:href="@{/ha/tiao?htmlt=good_gys}" >供应商</a>
									</li>
									<li data-id="goods5">
										<a th:href="@{/ha/tiao?htmlt=good_cg}" >采购</a>
									</li>
								</ul>
							</div>
						</div>
						<div class="col-md-10 sw" >
							<div id='wqq' style='margin-left: -17px;width: 103.3%;' data-id='${data-id}'>
								<!--子页面这里-->
								<div class="rightarea clearfix" style="margin-top: 1.8%;margin-bottom: 20px">
									<div class="mainarea clearfix">
										<div class="mainhead clearfix">
											<span class="title">商品管理</span>
											<div class="searchArea">
												<div class="btn-div">
													<a href="javascript:void(0);" v-on:click="sqlall(1)" class="btn btn-success">
														查询商品
													</a>
												</div>
											</div>
											<!-- <div class="list">
                                                 <form id="signupListImportForm" class="import-file-form" enctype="multipart/form-data">  
													 <input type="file" name="excelFile" id="excelFile" style="display:none" multiple="multiple" @change="fileUpload()">
													 <input class="btn btn-default" type="button" value="导入商品" @click="selectFile()">	   
												</form>
                      						</div> -->
											
											<div class="list">
												<a href="javascript:;" class="btn btn-default" v-on:click="exportExcel()">导出商品</a>
												<a href="javascript:;" class="btn btn-default" v-on:click="exportExcelru()">导入商品</a>
											</div>
											<div class="list search">
												<input class="inputtext" name="chazhao" type="text" placeholder="查找">
												<a href="javascript:;" class="search-btn"></a>
											</div>
											<div class="list">
												<select name="" id="types" class="form-control">
													<option value="">全部</option>
													<option v-for="item in list" :value="item.goodtypeid">{{item.goodtypename}}</option>
												</select>
											</div>
											<div class="list">
												<select name="" id="shopsss" class="form-control">
													<option v-for="itmes in shop" :value="itmes.shopid">{{itmes.shopname}}</option>
												</select>
											</div>
										</div>
										<div class="mainbody">
											<table class="settable table table-striped" border="1" id="settable">
												<thead>
													<tr>
														<th width="9%">选择</th>
														<th width="7%">序号</th>
														<th width="9%">类别</th>
														<th width="12%">品名</th>
														<th width="9%">货号/条码</th>
														<th width="9%">规格</th>
														<th width="9%">库存</th>
														<th width="9%">销售价</th>
														<th width="9%">成本价</th>
														<th width="9%">网店同步</th>
														<th width="9%">操作</th>
													</tr>
												</thead>
												<tbody>
													<tr v-for="itemhh,index in spgl.list">
														<td>
															<input type="checkbox">
														</td>
														<td>
															{{index+1}}
														</td>
														<td>
															{{itemhh.goodtypename}}
														</td>
														<td class="nametd">
															<div class="namediv">
																<img th:src="@{/img/logo-7.png}" alt="图片" style="width:15px;height: 15px;">
																<p>{{itemhh.goodname}}</p>
															</div>
														</td>
														<td>{{itemhh.goodtiaoxinma}}</td>
														<td>{{itemhh.goodsizename}}</td>
														<td>{{itemhh.goodcolorname}}</td>
														<td>{{itemhh.gooddetailscount}}</td>
														<td>{{itemhh.goodTagprice}}</td>
														<td>{{itemhh.goodCostprice}}</td>
														<td>
															<a href="javascript:;" v-on:click="del(itemhh,index)">删除</a>
															<a href="javascript:;">编辑</a>
														</td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
									<!--分页按钮-->
											<div class="pagebar" style="margin-left: 30%">
												<div class="pagetion">
													<div class="page">
														<ul class="pagination">
															<li>
																<a href="javascript:;">
																	首页
																</a>
															</li>
															<li>
																<a href="javascript:;" v-on:click="sqlall(spgl.prePage)">
																	&laquo;
																</a>
															</li>
															<li>
																<span style="font-size: 14px;">{{spgl.pageNum}}/{{spgl.pages}}</span>
															</li>
															<li>
																<a href="javascript:;" v-on:click="sqlall(spgl.nextPage)">
																	&raquo;
																</a>
															</li>
															<li>
																<a href="javascript:;">
																	尾页
																</a>
															</li>
															<li style="margin-left: 20px; float:left;">
																<input type="text" class="form-control" style="width: 100px;">
															</li>
															<li style="margin-left: 15px; float:left;">
																<a href="javascript:;" class="btn btn-default">
																	跳转
																</a>
															</li>
														</ul>
													</div>
												</div>

											</div>
									  <!--s-->
									  												<!--添加类别按钮-->
<div class="modal" style="top:250px" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
  <div class="modal-dialog" style="width: 450px;" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="exampleModalLabel">批量导入</h4>
      </div>
      <div class="modal-body">
		<form th:action="@{/sfile/excelUpload}" method="post" enctype="multipart/form-data">
          <div class="form-group row" style="margin: 20px;">
          	<div class="col-md-3">
          		<!--<label for="recipient-name" class="control-label">Recipient:</label>-->
            	<label class="text-center" style="line-height: 35px;">选择店铺</label>
          	</div>
          	<div class="col-md-9">
            	<!-- <input type="text" class="form-control col-md-3" id="recipient-name"  style="margin-top: 5px;"> -->
          	    <select name="shopname" id="shopsss"  class="form-control" style="width: 150px">
				      <option   v-for="itmes in shop" :value="itmes.shopid">{{itmes.shopname}}</option>
				</select>
          	</div>
          </div>
               <div class="form-group row" style="margin: 30px;">
                      <div class="input-append">
						 		<!-- 点击触发按钮 -->
						        <a class="btn btn-default" onclick="makeThisfile()"  id="browse">浏览</a>   
						       <!-- 用于展示上传文件名的表单 -->
						       <input id="showname" class="input-large" type="text" style="height:25px;border: 0px">  	         
						 </div>
               </div>
	          <div class="form-group row" style="margin: 20px;">
	          		<div class="col-md-4">
	          		      <a href="/sfile/download" class="btn btn-success">下载模板</a>
					 	<input name="file" type="file" id="thisfile" style="display: none" />     				
	          		</div>
	          		<div class="col-md-4">
	          		      <input type="submit" class="btn btn-success" value="上传excel">
	          		</div>
	          		<div class="col-md-4">
	          		     <button type="button"  class="btn btn-default" data-dismiss="modal" style="width: 100px;margin-right: 170px">取消</button>
	          		</div>
	          </div>
		</form>
      </div>
      <div class="modal-footer">
      	<div class="center-block">
      		<!-- <button type="button"  class="btn btn-default" data-dismiss="modal" style="width: 100px;margin-right: 170px">取消</button> -->
       		<!-- <button type="button" id="sw" class="btn quding" style="background-color: #44B549;" v-on:click="sub()">确定</button> -->
      	</div>
      </div>
    </div>
  </div>
</div>
<!--上面的是添加类别按钮-->
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--脚步-->
		<div class="foot" style="margin-top: 16px;">
			 <p>Copyright © 2010-2019 POSO2O. All Rights Reserved.</p>
		</div>
	</body>
	<script type="text/javascript">
		  //类别下拉款
		  var vue=new Vue({
			  el:".sw",
			  data(){
				  return {
					  list:[],
					  shop:[],
					  spgl:[]
				  }
			  },
			  methods:{
				 sqlall:function(pageNum){
					 var shopid=$("#shopsss").val();
						//查询全部详情啦哈哈哈哈 
						 //alert(shopid);
					     var goodname=$("[name=chazhao]").val();
					   //alert(goodname);
					     var goodtypeid=$("#types").val();
					  //alert(goodtypeid);
					 // alert(pageNum)
					  //alert(vue.spgl.pages)
					  if(vue.spgl.pages==0){
						  vue.spgl.pages=1;
					  }
					  if(pageNum>0 && pageNum<=vue.spgl.pages){
							  //alert("进来了")
							  $.ajax({
									 url:"[[@{/tjy_spgl/spglsqlAll}]]",
									 data:{pageNum:pageNum,goodtypeid:goodtypeid,goodname:goodname,shopid:shopid},
									 success:function(reulte){
										//alert(reulte)
										 vue.spgl=reulte;
									 }
								 })
						  }
				 },
				 del:function(itemhh,index){
					 alert(itemhh.gooddetailsid)
					 alert(index)
/* 						 vue.spgl.list.splice(index,1); */
					 $.ajax({
						 url:"[[@{/tjy_spgl/del?gooddetailsid=}]]"+itemhh.gooddetailsid,
						 success:function(reulte){
							 
							 var shopid=$("#shopsss").val();
								//查询全部详情啦哈哈哈哈 
								 //alert(shopid);
							     var goodname=$("[name=chazhao]").val();
							   //alert(goodname);
							     var goodtypeid=$("#types").val();
							  //alert(goodtypeid);
							 // alert(pageNum)
							  //alert(vue.spgl.pages)
							  if(vue.spgl.pages==0){
								  vue.spgl.pages=1;
							  }
									  //alert("进来了")
									  $.ajax({
											 url:"[[@{/tjy_spgl/spglsqlAll}]]",
											 data:{pageNum:1,goodtypeid:goodtypeid,goodname:goodname,shopid:shopid},
											 success:function(reulte){
												//alert(reulte)
												 vue.spgl=reulte;
											 }
										 })
							 
							 
						 }
					 })
				 },
				 exportExcel:function(){//excel导出
					 alert("导出")
					 var shopid=$("#shopsss").val();
					 //alert(shopid);
				     var goodname=$("[name=chazhao]").val();
				   	//alert(goodname);
				     var goodtypeid=$("#types").val();
				  	//alert(goodtypeid);
				    window.location.href="[[@{/sfile/excelchu?goodtypeid=}]]"+goodtypeid+"&goodname="+goodname+"&shopid="+shopid;	
				 },
				 exportExcelru:function(){//打开文件选择框 
				    alert(1) 
				    $('#exampleModal').modal('show');
					  var button = $(event.relatedTarget) // 触发模式的按钮
					  var recipient = button.data('whatever') // 从数据中提取信息-*属性
					  // 如果需要，可以在这里启动AJAX请求（然后在回调中进行更新）。
					  // 更新模态的内容。我们将在这里使用jQuery，但是您可以使用数据绑定库或其他方法。
					  $('#exampleModalLabel').html("批量导入")
					 /*  $('#exampleModal').find('.modal-body input').val(item.goodtypename) */
				 }
				
			  },
			  created:function(){
				  //查询类型
					 $.ajax({
						 url:"[[@{/tjy/all}]]",
						 success:function(reulte){
							// alert(1)
							 vue.list=reulte;
						 }
					 })
					 //查询这个人就几个店铺
					  $.ajax({
						 url:"[[@{/tjy_spgl/shops}]]",
						 dataType:"json",
						 success:function(reulte){
							 vue.shop=reulte;
							 var shopid=reulte[0].shopid;
							//查询全部详情啦哈哈哈哈 
							 /* alert(shopid) */
						     var goodname=$("[name=chazhao]").val();
						     /* alert(goodname); */
						     var goodtypeid=$("#types").val();
						     /* alert(goodtypeid); */
							  $.ajax({
								 url:"[[@{/tjy_spgl/spglsqlAll}]]",
								 data:{pageNum:1,goodtypeid:goodtypeid,goodname:goodname,shopid:shopid},
								 success:function(reulte){
									//alert("a");
									/*  alert(112111) */
									 vue.spgl=reulte;
								 }
							 })
						 }
					 })	 
			  }
		  })
		//触发隐藏的file表单
		  function makeThisfile(){
		         $('#thisfile').click();
		   }
		  
		    //file表单选中文件时,让file表单的val展示到showname这个展示框
		   $('#thisfile').change(function(){
		         $('#showname').val($(this).val())
		     })

	</script>
</html>